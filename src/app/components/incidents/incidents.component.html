<div class="wrap">
  <div class=sidebar>
    <div class="map-container">
      <div id="map"></div>
    </div>

    <div class="filter-container">
      <mat-card class="card">
        <mat-card-header>
          <mat-card-title>Filtrar incidentes</mat-card-title>
        </mat-card-header>
        <mat-card-content>

          <mat-form-field appearance="fill">
            <mat-label>Versi√≥n del cuestionario</mat-label>
            <mat-select [(ngModel)]="filterValues.version" value="all">
              <mat-option value="all">Todas las versiones</mat-option>
              <mat-option *ngFor="let version of reportVersions" value="{{version._id}}">{{version.createdAt}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Fecha inicio</mat-label>
            <input [(ngModel)]="filterValues.startDate" matInput [matDatepicker]="pickerStart">
            <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
            <mat-datepicker #pickerStart></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Fecha fin</mat-label>
            <input [(ngModel)]="filterValues.endDate" matInput [matDatepicker]="pickerEnd">
            <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
            <mat-datepicker #pickerEnd></mat-datepicker>
          </mat-form-field>


          <mat-slide-toggle [(ngModel)]="filterValues.place.enabled" (change)="placeToggleChanged($event)">Lugar
            de incidencia</mat-slide-toggle>
          <p *ngIf="filterValues.place.enabled && filterValues.place.radius">
            Radio de {{filterValues.place.radius}}m.
          </p>
          <br>

          <button mat-raised-button (click)="logFilterValues()">Values</button>
          <button mat-raised-button color="primary" (click)="getFilteredIncidents()">Ok!</button>
        </mat-card-content>
      </mat-card>
    </div>

  </div>
  <div class="result-container">
    <mat-card>
      <mat-card-title>
        Incidentes reportados
      </mat-card-title>
      <mat-card-content>
        <textarea>{{ getStringifiedJSON() }}</textarea>
        {{ selectedIncident}}
      </mat-card-content>
    </mat-card>
    <mat-paginator [pageIndex]="selectedIncident" hidePageSize="true" [length]="incidents.length" pageSize="1"
      (page)="onPageChange($event)">

    </mat-paginator>
  </div>
</div>
